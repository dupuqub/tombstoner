
'use strict'

//......................................................................................................................

onresize    = event => P.resize(event)
onclick     = event => P.click(event)
onmousemove = event => P.hover(event)
onkeydown   = event => P.press(event)
onkeyup     = event => P.release(event)

//......................................................................................................................

P.start = () =>
{
  P.draws.dust()
  P.draws.avatar()

  P.resize()
  P.updates.layout(P.builds.main() , P.dom('#screen'))
}

//......................................................................................................................

P.loop = () =>
{
  //....................................................................................................................

  if(P.state.layout.id === 'combat')
  {
    P.updates.combat()

    P.gamepads = navigator.getGamepads()

    P.controls()
  }

  //....................................................................................................................

  window.requestAnimationFrame(P.loop)
}

//......................................................................................................................

P.start()
P.loop()
